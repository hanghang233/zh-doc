{"remainingRequest":"/Users/cassie/Desktop/work2/person/zh_doc/node_modules/vue-loader/lib/index.js??ref--1-1!/Users/cassie/Desktop/work2/person/zh_doc/node_modules/@vuepress/markdown-loader/index.js??ref--1-2!/Users/cassie/Desktop/work2/person/zh_doc/docs/VUE/ElementUI/A004.md?vue&type=template&id=82e154a8&","dependencies":[{"path":"/Users/cassie/Desktop/work2/person/zh_doc/docs/VUE/ElementUI/A004.md","mtime":1576657620721},{"path":"/Users/cassie/Desktop/work2/person/zh_doc/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/cassie/Desktop/work2/person/zh_doc/node_modules/vue-loader/lib/loaders/templateLoader.js","mtime":499162500000},{"path":"/Users/cassie/Desktop/work2/person/zh_doc/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/cassie/Desktop/work2/person/zh_doc/node_modules/vue-loader/lib/index.js","mtime":499162500000},{"path":"/Users/cassie/Desktop/work2/person/zh_doc/node_modules/@vuepress/markdown-loader/index.js","mtime":1546968779000}],"contextDependencies":[],"result":["\n<ContentSlotsDistributor :slot-key=\"$parent.slotKey\"><h1 id=\"a004-elementui-基于elementui组件npm包发布流程\"><a class=\"header-anchor\" href=\"#a004-elementui-基于elementui组件npm包发布流程\" aria-hidden=\"true\">#</a> A004_ElementUI 基于elementUI组件npm包发布流程</h1>\n<ul>\n<li>重要目录结构：</li>\n</ul>\n<!--beforebegin--><div class=\"language-bash line-numbers-mode\"><!--afterbegin--><pre v-pre class=\"language-bash\"><code>├─plugins // elementui按需引入相关配置\n├─src // 引入组件的入口文件\n    ├─lib // 构建后生成的文件，发布到npm包\n└─package.json\n\n</code></pre>\n<div class=\"line-numbers-wrapper\"><span class=\"line-number\">1</span><br><span class=\"line-number\">2</span><br><span class=\"line-number\">3</span><br><span class=\"line-number\">4</span><br><span class=\"line-number\">5</span><br></div><!--beforeend--></div><!--afterend--><h2 id=\"引入element-elementui\"><a class=\"header-anchor\" href=\"#引入element-elementui\" aria-hidden=\"true\">#</a> 引入element/elementUI##</h2>\n<p>这里因为是基于elementUI二次封装的组件，并非所有组件都会用到，所以按需引入</p>\n<!--beforebegin--><div class=\"language-bash line-numbers-mode\"><!--afterbegin--><pre v-pre class=\"language-bash\"><code><span class=\"token function\">import</span> <span class=\"token punctuation\">{</span> Button, Select, Row, Input, Option, Cascader, DatePicker, \n         Table, TableColumn, Pagination <span class=\"token punctuation\">}</span> from <span class=\"token string\">'element-ui'</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">import</span> Vue from <span class=\"token string\">'vue'</span>\n\nVue.component<span class=\"token punctuation\">(</span>Button<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nVue.component<span class=\"token punctuation\">(</span>Select<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nVue.component<span class=\"token punctuation\">(</span>Row<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nVue.component<span class=\"token punctuation\">(</span>Input<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nVue.component<span class=\"token punctuation\">(</span>Option<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nVue.component<span class=\"token punctuation\">(</span>Cascader<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nVue.component<span class=\"token punctuation\">(</span>DatePicker<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nVue.component<span class=\"token punctuation\">(</span>Table<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nVue.component<span class=\"token punctuation\">(</span>TableColumn<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nVue.component<span class=\"token punctuation\">(</span>Pagination<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre>\n<div class=\"line-numbers-wrapper\"><span class=\"line-number\">1</span><br><span class=\"line-number\">2</span><br><span class=\"line-number\">3</span><br><span class=\"line-number\">4</span><br><span class=\"line-number\">5</span><br><span class=\"line-number\">6</span><br><span class=\"line-number\">7</span><br><span class=\"line-number\">8</span><br><span class=\"line-number\">9</span><br><span class=\"line-number\">10</span><br><span class=\"line-number\">11</span><br><span class=\"line-number\">12</span><br><span class=\"line-number\">13</span><br><span class=\"line-number\">14</span><br></div><!--beforeend--></div><!--afterend--><h2 id=\"添加组件\"><a class=\"header-anchor\" href=\"#添加组件\" aria-hidden=\"true\">#</a> 添加组件</h2>\n<p>lib文件存放组件库源码</p>\n<!--beforebegin--><div class=\"language-bash line-numbers-mode\"><!--afterbegin--><pre v-pre class=\"language-bash\"><code>├─lib\n    ├─dataTable\n        ├─dataTable.vue\n        ├─index.js\n    ├─dataSearch\n        ├─dataSearch.vue\n        ├─index.js\n    ├─index.js    //注册lib中所有组件\n\n//install是默认的方法，当外界组件在use这个组件的时候，就会调用默认的install方法，同时传vue这个类的参数\nDataTable.install <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>Vue<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    Vue.component<span class=\"token punctuation\">(</span>DataTable.name, DataTable<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n</code></pre>\n<div class=\"line-numbers-wrapper\"><span class=\"line-number\">1</span><br><span class=\"line-number\">2</span><br><span class=\"line-number\">3</span><br><span class=\"line-number\">4</span><br><span class=\"line-number\">5</span><br><span class=\"line-number\">6</span><br><span class=\"line-number\">7</span><br><span class=\"line-number\">8</span><br><span class=\"line-number\">9</span><br><span class=\"line-number\">10</span><br><span class=\"line-number\">11</span><br><span class=\"line-number\">12</span><br><span class=\"line-number\">13</span><br></div><!--beforeend--></div><!--afterend--><p>lib-&gt;index.js</p>\n<!--beforebegin--><div class=\"language-bash line-numbers-mode\"><!--afterbegin--><pre v-pre class=\"language-bash\"><code><span class=\"token function\">import</span> DataTable from <span class=\"token string\">'./dataTable/index'</span>\n<span class=\"token function\">import</span> DataSearch from <span class=\"token string\">'./dataSearch/index'</span>\n\n\n// 存储组件列表\nconst components <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n    DataSearch,\n    DataTable\n<span class=\"token punctuation\">]</span>\nconst <span class=\"token function\">install</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span>Vue<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>install.installed<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span>\n  components.map<span class=\"token punctuation\">(</span>component <span class=\"token operator\">=</span><span class=\"token operator\">></span> Vue.component<span class=\"token punctuation\">(</span>component.name, component<span class=\"token punctuation\">))</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>typeof window <span class=\"token operator\">!=</span><span class=\"token operator\">=</span> <span class=\"token string\">'undefined'</span> <span class=\"token operator\">&amp;&amp;</span> window.Vue<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  install<span class=\"token punctuation\">(</span>window.Vue<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">export</span> default <span class=\"token punctuation\">{</span>\n  //这里必须传install，use时自动调用install方法\n    install,\n    DataSearch,\n    DataTable\n<span class=\"token punctuation\">}</span>\n</code></pre>\n<div class=\"line-numbers-wrapper\"><span class=\"line-number\">1</span><br><span class=\"line-number\">2</span><br><span class=\"line-number\">3</span><br><span class=\"line-number\">4</span><br><span class=\"line-number\">5</span><br><span class=\"line-number\">6</span><br><span class=\"line-number\">7</span><br><span class=\"line-number\">8</span><br><span class=\"line-number\">9</span><br><span class=\"line-number\">10</span><br><span class=\"line-number\">11</span><br><span class=\"line-number\">12</span><br><span class=\"line-number\">13</span><br><span class=\"line-number\">14</span><br><span class=\"line-number\">15</span><br><span class=\"line-number\">16</span><br><span class=\"line-number\">17</span><br><span class=\"line-number\">18</span><br><span class=\"line-number\">19</span><br><span class=\"line-number\">20</span><br><span class=\"line-number\">21</span><br><span class=\"line-number\">22</span><br><span class=\"line-number\">23</span><br></div><!--beforeend--></div><!--afterend--><h2 id=\"npm包相关配置-package-json\"><a class=\"header-anchor\" href=\"#npm包相关配置-package-json\" aria-hidden=\"true\">#</a> npm包相关配置--package.json</h2>\n<p>1.package.js编译库（参考：https://cli.vuejs.org/zh/guide/build-targets.html#%E5%BA%94%E7%94%A8）</p>\n<ul>\n<li>--target : 构建目标，默认为应用模式。这里修改为 lib 启用库模式。</li>\n<li>--dest : 输出目录，默认 dist 。这里我们改成 lib</li>\n<li>[entry] : 最后一个参数为入口文件，默认为 src/App.vue 。这里我们指定编译 packages/ 组件库目录。</li>\n</ul>\n<p>2.配置private字段为true</p>\n<p>3.main字段：配置添加依赖时的主要入口。不使用main属性的话我们可能需要这样写引用：require(&quot;some-module/dist/app.js&quot;)，如果我们在main属性中指定了dist/app.js的话，我们就可以直接引用依赖就可以了：require(&quot;some-module&quot;)</p>\n<!--beforebegin--><div class=\"language-bash line-numbers-mode\"><!--afterbegin--><pre v-pre class=\"language-bash\"><code><span class=\"token string\">\"main\"</span><span class=\"token keyword\">:</span> <span class=\"token string\">\"lib/lsh-element-ui.common.js\"</span>,\n</code></pre>\n<div class=\"line-numbers-wrapper\"><span class=\"line-number\">1</span><br></div><!--beforeend--></div><!--afterend--><p>4..npmignore 文件</p>\n<p>设置忽略发布文件，视情况而定。</p>\n<p>5.files 白名单，里面的文件都会被发布出去</p>\n<!--beforebegin--><div class=\"language-bash line-numbers-mode\"><!--afterbegin--><pre v-pre class=\"language-bash\"><code><span class=\"token string\">\"files\"</span><span class=\"token keyword\">:</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token string\">\"dist/*\"</span>,\n    <span class=\"token string\">\"src/*\"</span>,\n    <span class=\"token string\">\"public/*\"</span>,\n    <span class=\"token string\">\"*.json\"</span>,\n    <span class=\"token string\">\"*.js\"</span>\n  <span class=\"token punctuation\">]</span>,\n</code></pre>\n<div class=\"line-numbers-wrapper\"><span class=\"line-number\">1</span><br><span class=\"line-number\">2</span><br><span class=\"line-number\">3</span><br><span class=\"line-number\">4</span><br><span class=\"line-number\">5</span><br><span class=\"line-number\">6</span><br><span class=\"line-number\">7</span><br></div><!--beforeend--></div><!--afterend--><p>6.npm publish --tag beta : npm包发布beta版</p>\n<h2 id=\"webpack-chainwebpack-配置处理\"><a class=\"header-anchor\" href=\"#webpack-chainwebpack-配置处理\" aria-hidden=\"true\">#</a> webpack chainWebpack 配置处理</h2>\n<!--beforebegin--><div class=\"language-bash line-numbers-mode\"><!--afterbegin--><pre v-pre class=\"language-bash\"><code>// 扩展 webpack 配置，使 packages 加入编译\n  chainWebpack: config <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n    config.module\n      .rule<span class=\"token punctuation\">(</span><span class=\"token string\">'js'</span><span class=\"token punctuation\">)</span>\n      .include\n        .add<span class=\"token punctuation\">(</span><span class=\"token string\">'/packages/'</span><span class=\"token punctuation\">)</span>\n        .end<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n      .use<span class=\"token punctuation\">(</span><span class=\"token string\">'babel'</span><span class=\"token punctuation\">)</span>\n        .loader<span class=\"token punctuation\">(</span><span class=\"token string\">'babel-loader'</span><span class=\"token punctuation\">)</span>\n        .tap<span class=\"token punctuation\">(</span>options <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n          // 修改它的选项<span class=\"token punctuation\">..</span>.\n          <span class=\"token keyword\">return</span> options\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n\n</code></pre>\n<div class=\"line-numbers-wrapper\"><span class=\"line-number\">1</span><br><span class=\"line-number\">2</span><br><span class=\"line-number\">3</span><br><span class=\"line-number\">4</span><br><span class=\"line-number\">5</span><br><span class=\"line-number\">6</span><br><span class=\"line-number\">7</span><br><span class=\"line-number\">8</span><br><span class=\"line-number\">9</span><br><span class=\"line-number\">10</span><br><span class=\"line-number\">11</span><br><span class=\"line-number\">12</span><br><span class=\"line-number\">13</span><br><span class=\"line-number\">14</span><br><span class=\"line-number\">15</span><br></div><!--beforeend--></div><!--afterend--><h2 id=\"npm包发布流程\"><a class=\"header-anchor\" href=\"#npm包发布流程\" aria-hidden=\"true\">#</a> npm包发布流程</h2>\n</ContentSlotsDistributor>\n",null]}